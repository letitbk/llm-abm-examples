# 💰 LLM 쉘링 시뮬레이션 비용 가이드

## 🚨 중요 공지

**OpenAI API는 유료 서비스입니다!** 이 가이드를 반드시 읽고 비용을 확인한 후 시뮬레이션을 실행하세요.

## 📊 비용 계산기 사용법

### 기본 사용법
```bash
# 기본 설정 비용 확인
python cost_calculator.py

# 모델별 비용 비교
python cost_calculator.py --compare

# 사용자 정의 설정
python cost_calculator.py --width 10 --height 10 --max-steps 3 --model gpt-4o-mini
```

### 매개변수 설명
- `--width`: 격자 너비 (기본값: 15)
- `--height`: 격자 높이 (기본값: 15)
- `--empty-ratio`: 빈 공간 비율 (기본값: 0.3)
- `--max-steps`: 최대 단계 수 (기본값: 5)
- `--agent-type`: 에이전트 유형 (simple/group, 기본값: simple)
- `--model`: OpenAI 모델 (기본값: gpt-4o-mini)

## 💵 모델별 비용 비교 (2025년 6월 업데이트)

> ⚠️ **중요**: 이 가격 정보는 2025년 6월 웹 검색을 통해 확인한 정보입니다.
> OpenAI는 가격을 빈번하게 변경하고 있으므로 [공식 가격 페이지](https://openai.com/pricing)에서 최신 정보를 확인하세요.

### 🚨 주요 변경사항
- **o3 모델 80% 가격 인하**: 고급 추론 모델이 접근 가능한 가격으로!
- **새로운 모델 추가**: GPT-4.1 시리즈, o3-pro, o1 등
- **가격 경쟁 격화**: 전반적인 가격 인하 추세

### 기본 설정 (15x15, 5단계, 157 에이전트)
| 모델 | 입력 토큰 비용 | 출력 토큰 비용 | 총 비용 | 상대 비용 | 특징 |
|------|---------------|---------------|---------|----------|------|
| **gpt-4o-mini** | $0.0180 | $0.0036 | **$0.0216** | 1.0x ✅ | 💡 최고 경제성 |
| **gpt-4.1-mini** | $0.0479 | $0.0096 | **$0.0575** | 2.7x ✅ | 💡 새로운 경제형 |
| gpt-3.5-turbo | $0.1797 | $0.0120 | $0.1917 | 8.9x ⚠️ | 기존 모델 |
| gpt-4o | $0.2995 | $0.0300 | $0.3295 | 15.3x ⚠️ | 🔄 출력 비용 인하 |
| **o3** | $0.2396 | $0.0479 | **$0.2875** | 13.3x ⭐ | 🔥 고급 추론 + 저비용 |
| **gpt-4.1** | $0.2396 | $0.0479 | **$0.2875** | 13.3x ⭐ | 🆕 최신 일반 모델 |
| o1 | $1.7955 | $0.3591 | $2.1546 | 99.7x ❌ | 🧠 고급 추론 |
| o3-pro | $2.3940 | $0.4788 | $2.8728 | 133.1x ❌ | 🚀 최고급 추론 |
| gpt-4 | $3.5940 | $0.3594 | $3.9534 | 183.3x ❌ | 레거시 모델 |

### 권장사항 (2025년 6월 업데이트)
- ✅ **gpt-4o-mini**: 여전히 최고 경제성
- ✅ **gpt-4.1-mini**: 새로운 경제형 대안
- ⭐ **o3**: 고급 추론 + 합리적 비용 (80% 인하 혜택!)
- ⭐ **gpt-4.1**: 최신 일반 모델, o3와 동일 가격
- ⚠️ **gpt-4o**: 출력 비용 인하로 개선됨
- ❌ **o1/o3-pro**: 특별한 추론 작업이 아니면 비추천

## 📈 설정별 비용 시나리오

### 💚 저비용 시나리오 (학습/테스트용)
```bash
python cost_calculator.py --width 10 --height 10 --max-steps 3 --model gpt-4o-mini
```
- **에이전트 수**: 70개
- **예상 비용**: ~$0.0053 (2024.12 기준)
- **권장 용도**: 기능 테스트, 학습

### 🟡 중간 비용 시나리오 (실험용)
```bash
python cost_calculator.py --width 15 --height 15 --max-steps 5 --model gpt-4o-mini
```
- **에이전트 수**: 157개
- **예상 비용**: ~$0.0216 (2024.12 기준)
- **권장 용도**: 일반적인 실험

### 🟠 고비용 시나리오 (연구용)
```bash
python cost_calculator.py --width 20 --height 20 --max-steps 10 --model gpt-4o-mini
```
- **에이전트 수**: 280개
- **예상 비용**: ~$0.0784 (2024.12 기준)
- **권장 용도**: 심화 연구

## 🎯 비용 절약 전략

### 1. 무료 대안 사용
```bash
# 완전 무료 데모 모드
python demo_schelling_llm.py

# 전통적 방법 (무료)
python schelling_traditional.py
```

### 2. 설정 최적화
| 변경 사항 | 비용 절약 | 영향 |
|----------|----------|------|
| 격자 크기: 15x15 → 10x10 | 56% 절약 | 에이전트 수 감소 |
| 단계 수: 5 → 3 | 40% 절약 | 시뮬레이션 기간 단축 |
| 모델: gpt-4 → gpt-4o-mini | 95% 절약 | 성능 거의 동일 |
| 빈 공간: 0.3 → 0.5 | 29% 절약 | 에이전트 수 감소 |

### 3. 단계적 접근
1. **1단계**: 데모 모드로 기능 확인
2. **2단계**: 작은 격자(10x10)로 테스트
3. **3단계**: 필요시 크기 확장

## 🔍 비용 구성 요소

### API 호출 패턴
```
총 API 호출 = (에이전트 수 × 예상 단계 수) + 만족도 샘플링 호출
```

### 토큰 사용량
- **입력 토큰**: 격자 정보 + 프롬프트 (~200 토큰/호출)
- **출력 토큰**: 만족도 응답 (~10 토큰/호출)

### 비용 계산
```
총 비용 = (입력 토큰 수 ÷ 1000) × 입력 가격 + (출력 토큰 수 ÷ 1000) × 출력 가격
```

## 📋 실행 전 체크리스트

### 필수 확인사항
- [ ] 비용 계산기로 예상 비용 확인
- [ ] OpenAI 계정 잔액 확인
- [ ] 월 사용 한도 설정 확인
- [ ] 데모 모드 먼저 테스트

### 권장 설정
- [ ] 모델: gpt-4o-mini 사용
- [ ] 격자 크기: 15x15 이하
- [ ] 단계 수: 5 이하
- [ ] 에이전트 유형: simple

## 🛡️ 안전 장치

### 자동 비용 경고
- 시뮬레이션 실행 전 비용 정보 표시
- $0.01 이상 시 사용자 확인 요청
- 실행 중 Ctrl+C로 중단 가능

### 비용 모니터링
```bash
# 실행 후 사용량 확인
echo "OpenAI 사용량 대시보드: https://platform.openai.com/usage"
```

## 🎓 교육용 권장 설정

### 수업용 (다수 학생)
```bash
# 매우 저렴한 설정
python cost_calculator.py --width 8 --height 8 --max-steps 3 --model gpt-4o-mini
# 예상 비용: ~$0.0027 (학생당)
```

### 개인 학습용
```bash
# 표준 설정
python cost_calculator.py --width 10 --height 10 --max-steps 5 --model gpt-4o-mini
# 예상 비용: ~$0.0098
```

### 연구용
```bash
# 상세 분석용
python cost_calculator.py --width 20 --height 20 --max-steps 10 --model gpt-4o-mini
# 예상 비용: ~$0.0784
```

## 🚨 주의사항

### 비용 관련
- API 요금은 실시간으로 변동될 수 있습니다
- 네트워크 오류 시 재시도로 추가 비용 발생 가능
- 모델 업데이트 시 토큰 사용량 변경 가능

### 사용 제한
- OpenAI API 사용 정책 준수 필요
- 과도한 요청 시 Rate Limit 적용
- 계정 잔액 부족 시 실행 중단

## 🔗 유용한 링크

- [OpenAI 가격 정보](https://openai.com/pricing) - **최신 가격 확인 필수!**
- [사용량 대시보드](https://platform.openai.com/usage)
- [API 키 관리](https://platform.openai.com/api-keys)
- [사용 한도 설정](https://platform.openai.com/account/billing/limits)

## 📅 가격 정보 업데이트

이 가이드의 가격 정보는 **2025년 6월 웹 검색**을 통해 확인했습니다:

### 주요 모델 가격 (per 1M tokens)
- **gpt-4o-mini**: $0.15/1M 입력, $0.60/1M 출력 (유지)
- **gpt-4.1-mini**: $0.40/1M 입력, $1.60/1M 출력 (신규)
- **o3**: $2.00/1M 입력, $8.00/1M 출력 (🔥 80% 인하!)
- **gpt-4.1**: $2.00/1M 입력, $8.00/1M 출력 (신규)
- **gpt-4o**: $2.50/1M 입력, $5.00/1M 출력 (출력 비용 인하)
- **gpt-3.5-turbo**: $1.50/1M 입력, $2.00/1M 출력 (유지)
- **o1**: $15.00/1M 입력, $60.00/1M 출력 (신규)
- **o3-pro**: $20.00/1M 입력, $80.00/1M 출력 (신규)
- **gpt-4**: $30.00/1M 입력, $60.00/1M 출력 (유지)

### 🚨 중요 변경사항
1. **o3 모델 80% 가격 인하**: 고급 추론 모델이 접근 가능한 가격으로
2. **새로운 경제형 모델**: gpt-4.1-mini 추가
3. **가격 변동 빈도 증가**: 월별 확인 필요
4. **모델 생명주기 단축**: GPT-4.5는 2025년 7월 14일 폐지 예정

> ⚠️ **중요**: OpenAI는 가격을 빈번하게 변경하고 있습니다. 실제 사용 전에는 반드시 [OpenAI 공식 가격 페이지](https://openai.com/pricing)에서 최신 정보를 확인하세요.

---

**💡 팁**: 처음 사용하시는 분은 반드시 데모 모드(`demo_schelling_llm.py`)로 시작하세요!